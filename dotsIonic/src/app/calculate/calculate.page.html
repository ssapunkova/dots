<ion-header>
  <ion-toolbar>
    <ion-title>Calculate</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <ion-item color="secondary">
    Nutrition
  </ion-item>

  <ion-card *ngFor="let param of paramsService.nutrition">
    <ion-card-header>
      <ion-icon name="nutrition" color="tertiary"></ion-icon>
      {{ param.Title }}
    </ion-card-header>
    <ion-card-content>

      <ion-list>

        <ion-item>
          Default goal: {{ param.Goal }}
        </ion-item>
        <ion-item *ngIf="formulas[param.Title]">

          <ion-grid>

            <ion-row>

              <ion-col>
                <ion-grid>

                  <ion-row *ngFor="let field of formulas[param.Title].required; let i = index">

                    <ion-col>
                      <ion-label style="max-width: 50%"> {{ field.Title }} </ion-label>
                    </ion-col>

                    <ion-col>

                      <ion-item lines="none" *ngIf="field.Type == 'number'" style="display: flex">
                        <ion-input *ngIf="field.Type == 'number'"
                          type="number" [(ngModel)]="values.nutrition[i]"></ion-input>
                        <ion-label style="margin-left: 0.5rem">{{ field.Unit }}</ion-label>
                      </ion-item>

                      <div *ngIf="field.Type == 'checkbox'">
                        <ion-item lines="none" *ngFor="let option of field.Options; let j = index" style="display: flex">
                          <ion-checkbox
                            [name]="j"
                            [(ngModel)]="values.nutrition[i]"
                            [value]="option.Value"></ion-checkbox>
                            <ion-label style="margin-left: 0.5rem">{{ option.Title}}</ion-label>
                        </ion-item>
                      </div>

                    </ion-col>

                  </ion-row>
                </ion-grid>
              </ion-col>

            </ion-row>
            <ion-row>
              <ion-col>
                {{ formulas[param.Title].formula(values.nutrition) }}
              </ion-col>
            </ion-row>

          </ion-grid>

        </ion-item>

      </ion-list>

      {{ param | json }}

    </ion-card-content>
  </ion-card>

</ion-content>

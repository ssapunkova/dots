<ion-header>
  <ion-toolbar>
    <ion-title>Calculate</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <ion-item color="secondary">
    Nutrition
  </ion-item>

  <ion-card *ngFor="let param of paramsService.nutrition">

    <ion-card-header (click)="open = param.Title">
      <ion-icon name="nutrition" color="tertiary"></ion-icon>
      {{ param.Title }}
    </ion-card-header>

    <ion-card-content *ngIf="open == param.Title">

      <ion-list>

        <ion-item>
          <ion-label> Default value: {{ param.Goal }} </ion-label>
          <ion-label *ngIf="userResult[param.Title] != null">Your value: {{ userResult[param.Title] }} </ion-label>
        </ion-item>

        <ion-item *ngIf="formulas[param.Title]">

          <ion-grid>

            <ion-row>

              <ion-col>
                <ion-grid>

                  <ion-row 
                    *ngFor="let field of formulas[param.Title].required; let i = index">

                    <ion-col
                      size-sm="12" size-md="6">
                      

                      <ion-item lines="none">

                        <div *ngIf="field.Type == 'number'" class="value-input-div">
                          <ion-label style="max-width: 50%"> {{ field.Title }} </ion-label>
                          <ion-input 
                            *ngIf="field.Type == 'number'"
                            type="number" [(ngModel)]="values.nutrition[i]"></ion-input>
                          <ion-label style="margin-left: 0.5rem">{{ field.Unit }}</ion-label>
                        </div>

                        <div *ngIf="field.Type == 'checkbox'" class="value-input-div">
                          <ion-radio-group value="field.Title">
                            <ion-item lines="none" *ngFor="let option of field.Options; let j = index">
                              <ion-radio
                                [name]="field.Title"
                                [(ngModel)]="values.nutrition[i]"
                                [value]="option.Title"></ion-radio>
                              
                              <ion-label>{{ option.Title}}</ion-label>
                            </ion-item>
                          </ion-radio-group>
                        </div>

                        <div *ngIf="field.Type == 'select'" class="value-input-div">
                          <ion-select [(ngModel)]="values.nutrition[i]"
                            [placeholder]="field.Title">
                            <ion-select-option *ngFor="let option of field.Options; let j = index"
                              [value]="option.Value">{{ option.Title }}</ion-select-option>
                          </ion-select>
                        </div>
                      
                      </ion-item>

                    </ion-col>

                  </ion-row>

                  <ion-row>
                    <ion-button (click)="calculate(param.Title, values.nutrition)">
                      Calculate
                    </ion-button>
                  </ion-row>

                </ion-grid>
              </ion-col>

            </ion-row>
           

          </ion-grid>

        </ion-item>

      </ion-list>

    </ion-card-content>
  </ion-card>

</ion-content>

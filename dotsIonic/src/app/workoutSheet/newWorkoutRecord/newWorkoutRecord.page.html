<ion-header>
    <ion-toolbar>
      <ion-title *ngIf="record.Date == null; else editTitle"> New workout record</ion-title>
      <ng-template #editTitle>
        <ion-title>Edit workout record</ion-title>
      </ng-template>
    </ion-toolbar>
  </ion-header>

  <ion-content class="padding">

    <ion-grid>

      <ion-row>
        <ion-col>
          <ion-item>
            Date
            <ion-input
              slot="end"
              [(ngModel)]='record.Date'
              type="date" placeholder="Date"></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row *ngFor="let field of fields; let i = index">

        <ion-col style="padding-left: 1.2rem">
          {{ field.Title }}
        </ion-col>

        <ion-col>

          <ion-checkbox *ngIf="field.Type == 'Bool'" [(ngModel)]='record.Values[i]' style='margin-right: 1rem'></ion-checkbox>

          <ion-input *ngIf="field.Type == 'Number'" type="number" placeholder="Result" [(ngModel)]='record.Values[i]'>
          </ion-input>

          <ion-input *ngIf="field.Type == 'Time'" type="time" placeholder="Result" [(ngModel)]='record.Values[i]'>
          </ion-input>

        </ion-col>

        <ion-col *ngIf="field.Type != 'Bool'">
          <percentage-chip
            [percentage]="record.PercentageOfGoal[i]"></percentage-chip>

          <ion-label>
            Goal: {{ field.Goal }}
          </ion-label>

          <ion-input type="number" placeholder="%" hidden
            [(ngModel)]='record.PercentageOfGoal[i]'
            [value]="generalService.calculatePercentage(record.Values[i], field.Goal)">
          </ion-input>
        </ion-col>

      </ion-row>
    </ion-grid>

    <ion-row>

      <ion-col sizeXs="6">
        <ion-button expand="full" (click)="closeModal()">Cancel</ion-button>
      </ion-col>
      <ion-col sizeXs="6">
        <ion-button expand="full" (click)="saveChanges()">Save</ion-button>
      </ion-col>

    </ion-row>

  </ion-content>

<ion-header>
    <ion-toolbar>
      <ion-title *ngIf="record.Date == null; else editTitle"> New nutrition record</ion-title>
      <ng-template #editTitle>
        <ion-title>Edit nutrition record</ion-title>
      </ng-template>
    </ion-toolbar>
  </ion-header>

  <ion-content class="padding">

      <ion-grid>

        <ion-row>
          <ion-col>
            <ion-item>
              Date
              <ion-input
                slot="end"
                [(ngModel)]='record.Date'
                type="date" placeholder="Date"></ion-input>
            </ion-item>
          </ion-col>
        </ion-row>

        <ion-row *ngFor="let field of fields; let i = index" >

          <ion-col style="padding-left: 1.2rem">
            {{ field.Title }}
          </ion-col>

          <ion-col>
            <ion-input type="number" placeholder="Result" [(ngModel)]='record.Values[i]'>
            </ion-input>
          </ion-col>

          <ion-col>
            <percentage-chip
              [percentage]="record.PercentageOfGoal[i]"></percentage-chip>

            <ion-label>
              Goal: {{ goals[i] }}
            </ion-label>

            <ion-input type="number" placeholder="%" hidden
              [(ngModel)]='record.PercentageOfGoal[i]'
              [value]="generalService.calculatePercentage(this.record.Values[i], this.goals[i])">
            </ion-input>
          </ion-col>


        </ion-row>

        <ion-row>

          <ion-col sizeXs="6">
            <ion-button expand="full" (click)="closeModal()">Cancel</ion-button>
          </ion-col>
          <ion-col sizeXs="6">
            <ion-button expand="full" (click)="saveChanges()">Save</ion-button>
          </ion-col>

        </ion-row>

      </ion-grid>


  </ion-content>

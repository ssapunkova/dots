<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>
      {{ 'Home' | translate }}
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="!loadingService.isPageLoading">

  <ion-grid>

    <ion-row>

      <ion-col>

        <div class="monthCarousel">

          <ion-slides [options]="slideOpts">

            <ion-slide
              *ngFor="let month of showingMonths; let i = index">
              
                <ion-card>

                  <ion-card-header class="color-{{i + 1}}">
                    {{ month }}
                  </ion-card-header>

                  <ion-card-content>

                    <div *ngIf="workoutStats.MonthlyStats.Data[month] != null">

                      <div class="sub-header">
                        {{ 'Workouts' | translate }}
                      </div>

                      <div>
                        <ion-icon 
                          class="tendencyIcon"
                          name="arrow-{{ workoutStats.MonthlyStats.Data[month].Arrows[0]}}"
                          [color]="workoutStats.MonthlyStats.Data[month].Arrows[0] == 'up' ? 'success': 'danger'">
                        </ion-icon>
                        {{ workoutStats.MonthlyStats.Data[month].Records / 4 | number: '1.0-1'}}
                        {{ 'timesAWeek' | translate }}
                      </div>

                      <div>
                        <ion-icon 
                          class="tendencyIcon"
                          name="arrow-{{ workoutStats.MonthlyStats.Data[month].Arrows[1]}}"
                          [color]="workoutStats.MonthlyStats.Data[month].Arrows[1] == 'up' ? 'success': 'danger'">
                        </ion-icon>
                        {{ workoutStats.MonthlyStats.Data[month].Percentage | number: '1.0-0'}}%
                        {{ 'fullfilledGoals' | translate }}
                      </div>

                    </div>

                    <div *ngIf="nutritionStats.MonthlyStats.Data[month] != null">

                      <div class="sub-header">
                        {{ 'Nutrition' | translate }}
                      </div>

                      <div>
                        <ion-icon 
                          class="tendencyIcon"
                          name="arrow-{{ nutritionStats.MonthlyStats.Data[month].Arrows}}"
                          [color]="nutritionStats.MonthlyStats.Data[month].Arrows == 'up' ? 'success': 'danger'">
                        </ion-icon>
                        {{ nutritionStats.MonthlyStats.Data[month].Percentage | number: '1.0-0'}}%
                        {{ 'fullfilledGoals' | translate }}
                      </div>

                    </div>

                  </ion-card-content>

                </ion-card>

            </ion-slide>

          </ion-slides>
          
        </div>

      </ion-col>

    </ion-row>

    <ion-row>

      <ion-col sizeLg="6" sizeMd="6" sizeSm="12">

        <ion-card *ngIf="workoutStats">
          <ion-card-header class="color-secondary">
            {{ 'Workouts' | translate }} 
            {{ workoutStats.OverallFrequency | number: '1.0-1' }} {{ 'timesAWeek' | translate }}
          </ion-card-header>

          <ion-card-content>

            <div 
              *ngFor="let sheet of workoutStats.Sheets; let i = index"
              style="margin-bottom: 7px">

              <div class="sub-header">
                {{ sheet.Title }} ({{ workoutStats.Frequency[i] | number: '1.0-1' }} {{ 'timesAWeek' | translate }})
              </div>

              <div>
                {{ workoutStats.StartAndNow[i].CurrentPercentage | number: '1.0-0' }}% {{ 'latestAchievement' | translate}}
              </div>
              <div>
                {{ workoutStats.StartAndNow[i].Diff >= 0 ? '+' : ''}} 
                {{ workoutStats.StartAndNow[i].Diff | number: '1.0-0' }}% {{ 'goalAchievementsSinceStart' | translate }}
              </div>

            </div>

          </ion-card-content>

          <ion-button 
            expand="full"
            fill="clear"
            color="secondary"
            routerLink="/workouts">
            {{ 'GoToWorkouts' | translate }}
          </ion-button>
        </ion-card>

      </ion-col>

      <ion-col sizeLg="6" sizeMd="6" sizeSm="12">

        <ion-card *ngIf="nutritionStats">
          <ion-card-header class="color-tertiary">
            {{ 'Nutrition' | translate }} 
          </ion-card-header>

          <ion-card-content>

            <div 
              style="margin-bottom: 7px">

              <div>
                {{ nutritionStats.StartAndNow.CurrentPercentage | number: '1.0-0' }}% {{ 'latestAchievement' | translate}}
              </div>

            </div>

          </ion-card-content>

          <ion-button 
            expand="full"
            fill="clear"
            color="secondary"
            routerLink="/nutrition">
            {{ 'GoToNutrition' | translate }}
          </ion-button>
        </ion-card>

      </ion-col>

    </ion-row>

  </ion-grid>

</ion-content>

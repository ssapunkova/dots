<ion-card>

  <ion-card-content>

    <ion-toolbar>
      <ion-label slot="start">Legend</ion-label>
      <ion-button slot="end" (click)="editGoals()">
        <ion-icon name="create"></ion-icon>
      </ion-button>
    </ion-toolbar>

    <ion-grid *ngIf="showLegend">

      <ion-row>

        <ion-col
          *ngFor="let param of data; let i = index"
          sizeLg="12"
          sizeMd="4"
          sizeSm="6"
          sizeXs="12">

          <ion-label class="chart-legend-item" >
            <div class="chart-legend-color" [style.backgroundColor]="colorScheme[i]"></div>

            <ion-label *ngIf="param.Title.length > 20; else fullTitle"> {{ param.Title | slice:0:20 }}...  </ion-label>
            <ng-template #fullTitle> {{ param.Title }} </ng-template> :


            <ion-label>

              <div *ngIf="generalService.getType(goals[i]) != 'boolean'">
                {{ goals[i] }}
              </div>
              <div *ngIf="goals[i] == 'true'">
                <ion-icon name="checkmark-circle" color="success"></ion-icon>
              </div>
              <div *ngIf="goals[i] == 'false'">
                <ion-icon name="close-circle" color="danger"></ion-icon>
              </div>

            </ion-label>

            <ion-chip color="warning" *ngIf="goals[i] != param.Goal">Custom goal</ion-chip>
          </ion-label>

        </ion-col>

      </ion-row>

    </ion-grid>

    <ion-button expand="block" fill="clear" title="Hide legend"
      (click)="(showLegend == true) ? showLegend = false : showLegend = true">

      <ion-icon *ngIf="showLegend" name="arrow-dropup-circle" color="primary"></ion-icon>
      <ion-icon *ngIf="!showLegend" name="arrow-dropdown-circle" color="primary"></ion-icon>
    </ion-button>

  </ion-card-content>

</ion-card>
